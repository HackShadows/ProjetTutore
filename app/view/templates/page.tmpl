<!doctype html>

{% import "nav.tmpl" as nav_tmpl %}

<html lang="fr">
<head>
	{% block head %}
	<title>GeoPuzzle</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<link rel="icon" type="image/png" href="/static/img/favicon.png">

	<link rel="stylesheet" href="/static/css/bootstrap.min.css">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="/static/css/main.css">
    <link rel="stylesheet" href="/static/css/style.css">
	
	{% block css %}{% endblock %}
	{% endblock %}
</head>

<body>
	<div class="d-flex flex-column min-vh-100">
		<header class="navbar navbar-dark sticky-top bg-primary flex-md-nowrap p-0 shadow">
			<a class="navbar-brand col-md-3 col-lg-2 me-0 px-3 fs-6 fw-bold text-white" href="/">
				<i class="bi bi-puzzle-fill me-2"></i>GeoPuzzle
			</a>
			
			<div class="w-100"></div>

			<div class="navbar-nav flex-row align-items-center pe-3">
				<div class="nav-item text-nowrap d-flex align-items-center">
					<span class="text-white me-3 small d-none d-sm-inline">{{ user_name if user_name else "Invité" }}</span>
					<a class="nav-link p-0" href="/connexion">
						<div class="bg-white text-primary rounded-circle d-flex align-items-center justify-content-center shadow-sm" style="width: 35px; height: 35px;">
							<svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
								<path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
							</svg>
						</div>
					</a>
				</div>
			</div>
		</header>

		<div class="d-flex flex-row flex-grow-1">
			<nav class="bg-white border-end shadow-sm" style="width: 250px; min-width: 250px;">
				{% set nav_items = [
					{"target": "/", "text": "Accueil"},
					{"target": "/map", "text": "Carte des puzzles"},
					{"target": "/personal-puzzles", "text": "Mes puzzles"},
					{"target": "/play", "text": "Jouer"}
				] %}
				{% block nav %}
					{{ nav_tmpl.nav(items = nav_items, current = nav_current if nav_current is defined else 0) }}
				{% endblock %}
			</nav>

			<main class="container-fluid py-5 bg-light px-md-5">
				{% block main %}{% endblock %}
			</main>
		</div>

		<footer class="mt-auto border-top bg-dark text-light">
			{% block footer %}
			<div class="container py-4">
				<div class="row align-items-center">
					<div class="col-md-6 text-center text-md-start mb-3 mb-md-0">
						<h6 class="text-uppercase fw-bold mb-3 text-secondary">Équipe de développement</h6>
						<p class="mb-0 small opacity-75">
							M. Boullot • T. Cauchy • M. Ciserane<br>
							F. Ho-Huu-Campanelli • V. Laporte
						</p>
					</div>

					<div class="col-md-6 text-center text-md-end">
						<h3 class="h5 fw-bold text-primary mb-1">GeoPuzzle</h3>
						<p class="small text-white-50 mb-0">
							&copy; 2026 — Projet Tutoré 3A<br>
							<span class="badge bg-light text-dark mt-1">Version 1.0</span>
						</p>
					</div>
				</div>
			</div>
			{% endblock %}
		</footer>
	</div>

	<script src="/static/js/bootstrap.bundle.min.js"></script>

	{% block js %}{% endblock %}
</body>
</html>
